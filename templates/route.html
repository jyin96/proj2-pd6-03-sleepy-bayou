{% extends "layout.html" %}

{% block content %}

<style>
  html, body, #map-canvas
  {
  height:100%;
  margin: 0px;
  padding: 0px;
  }
</style>

<div class="bg">
    {% if "username" in session %}
    <h1> INPUT YOUR ROUTE </h1>
    <form action="/results", method="post">
	<div id="mainform" class="ui form segment">
	  
	  <div class="field">
	    <label> Starting Point </label>
	    <div class="ui left labeled icon input" id="locationField">
	      <input name="start" id="autocomplete" type="text"/>
	      <i class="location icon"></i>
	      <div class="ui corner label">
		<i class="asterisk icon"></i>
	      </div>
	    </div>
	   </div>

	   <div class="field">
	     <label> Endpoint </label>
	     <div class="ui left labeled icon input" id="locationField2">
	       <input name="end" id="autocomplete2" type="text"/>
	       <i class="flag icon"></i>
	       <div class="ui corner label">
		 <i class="asterisk icon"></i>
	       </div>
	     </div>
	   </div>

	   <div class="field">
	     <label> I'm in the mood for...</label>
	     <input type="text" id="pref">
	     <br>
	     <label>
	       Add to Preferences! 
	       <input type="checkbox" name="preference" value="add">

	     </label>
	   </div>

	   <div class="field">
	     <label> Look through your saved preferences! </label>
	       <div class="menu">
		 <select id = "pref2"> 
		 {% for key, value in preferences.iteritems() %}
		 {% if value == True %}
		 <option value={{key}}> {{key}} </option>
		 {% endif %}
		 {% endfor %}

		 <div class="item active" data-value="-1"> Preferences</div>
	       </div> <!--menu-->
	     </div> <!--ui selection dropdown-->
	   <input type="submit" class="ui blue submit button" id="search" value="Search"/>
	   </div> <!--field-->
	 </div> <!--ui form segment-->
	</form>

	      
    {% else %}
    <div class="ui error form segment">
      <div class="ui error message">
	<p>
	Please login first! If you don't have an account yet, <a href="/"> REGISTER </a> now!
	</p>
      </div>
    </div>

    {% endif %}
<br>
<br>
<br>
</div> <!--bg-->

<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCzb-imYEF9wzQX6r8mTanmjR3U7kZvGaw&sensor=false&libraries=places"></script>

<script>
var placeSearch, autocomplete;
  initialize = function() {
  document.getElementById("locationField").addEventListener ("focus",geolocate, false);
  new google.maps.places.Autocomplete((document.getElementById('autocomplete')),{ types: ['geocode'] });
  document.getElementById("locationField2").addEventListener ("focus",geolocate, false);
  new google.maps.places.Autocomplete((document.getElementById('autocomplete2')),{ types: ['geocode'] });
  }
  geolocate = function(){
  }
  window.onload = initialize;

('.ui.dropdown')
.dropdown();
</script>  


{% endblock %}
